<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Simulation</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        canvas {
            display: block;
            margin: 0 auto;
            background-color: #000;
        }
    </style>
</head>
<body>
    <canvas id="simulationCanvas"></canvas>
    <script>
        // Get the canvas element and its context
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas dimensions
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Define a simple life form class
        class LifeForm {
            constructor(x, y, radius, color) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.color = color;
                this.speed = Math.random() * 2 + 1; // Speed property
                this.size = radius; // Size property
                this.lifespan = Math.random() * 200 + 100; // Lifespan property
                this.age = 0; // Age property
                this.reproductionChance = Math.random() * 0.1 + 0.01; // Reproduction chance property
                this.intelligence = Math.random() * 100; // Intelligence property
                this.knowledge = ""; // Knowledge property
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
            }

            update() {
                this.draw();
                this.x += this.speed;
                // Simulate wrapping around canvas
                if (this.x - this.radius > canvas.width) {
                    this.x = -this.radius;
                }
                // Increment age and check for death
                this.age++;
                if (this.age >= this.lifespan) {
                    this.die();
                }
            }

            die() {
                // Remove the life form from the simulation
                const index = lifeForms.indexOf(this);
                if (index !== -1) {
                    lifeForms.splice(index, 1);
                }
            }

            reproduce() {
                if (Math.random() < this.reproductionChance) {
                    // Create a new life form with slight variations
                    const newX = this.x + (Math.random() - 0.5) * 50;
                    const newY = this.y + (Math.random() - 0.5) * 50;
                    const newRadius = this.radius + (Math.random() - 0.5) * 5;
                    const newColor = `hsl(${Math.random() * 360}, 50%, 50%)`;
                    const newIntelligence = this.intelligence + (Math.random() - 0.5) * 10; // Introduce intelligence variation
                    lifeForms.push(new LifeForm(newX, newY, newRadius, newColor, newIntelligence));
                }
            }

            // Mutation function to introduce variation
            mutate() {
                // Mutate speed, size, reproduction chance, and intelligence
                this.speed += (Math.random() - 0.5) * 0.2;
                this.size += (Math.random() - 0.5) * 2;
                this.reproductionChance += (Math.random() - 0.5) * 0.01;
                this.intelligence += (Math.random() - 0.5) * 5;
                // Ensure values remain within reasonable ranges
                if (this.speed < 1) {
                    this.speed = 1;
                } else if (this.speed > 3) {
                    this.speed = 3;
                }
                if (this.size < 5) {
                    this.size = 5;
                } else if (this.size > 30) {
                    this.size = 30;
                }
                if (this.reproductionChance < 0.01) {
                    this.reproductionChance = 0.01;
                } else if (this.reproductionChance > 0.2) {
                    this.reproductionChance = 0.2;
                }
                if (this.intelligence < 0) {
                    this.intelligence = 0;
                } else if (this.intelligence > 100) {
                    this.intelligence = 100;
                }
            }

            // Function to check for recognition of simulation
            recognizeSimulation() {
                if (this.intelligence > 90 && Math.random() < 0.01) { // High intelligence and small chance
                    this.knowledge = "I think I'm in a simulation...";
                }
            }
        }

        // Create an array to hold life forms
        const lifeForms = [];

        // Function to initialize life forms
        function init() {
            for (let i = 0; i < 50; i++) {
                const radius = Math.random() * 20 + 10;
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const color = `hsl(${Math.random() * 360}, 50%, 50%)`;
                lifeForms.push(new LifeForm(x, y, radius, color));
            }
        }

        // Function to simulate evolution
        function evolve() {
            // Introduce mutation to life forms
            lifeForms.forEach(lifeForm => {
                if (Math.random() < 0.05) { // Chance of mutation
                    lifeForm.mutate();
                }
            });
            // Natural selection - remove older life forms
            lifeForms.forEach(lifeForm => {
                if (lifeForm.age >= lifeForm.lifespan) {
                    lifeForm.die();
                }
            });
            // Reproduction
            lifeForms.forEach(lifeForm => {
                lifeForm.reproduce();
            });
            // Recognize simulation
            lifeForms.forEach(lifeForm => {
                lifeForm.recognizeSimulation();
            });
        }

        // Function to animate life forms
        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            evolve(); // Simulate evolution
            lifeForms.forEach(lifeForm => {
                lifeForm.update();
            });
            // Display knowledge
            lifeForms.forEach(lifeForm => {
                if (lifeForm.knowledge) {
                    console.log(lifeForm.knowledge);
                }
            });
        }

        // Initialize and start animation
        init();
        animate();
    </script>
</body>
</html>
